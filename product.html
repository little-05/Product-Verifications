<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Product Verification</title>

<!-- QR Scanner Library -->
<script src="https://unpkg.com/html5-qrcode"></script>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    padding: 20px;
    text-align: center;
  }
  .card {
    background: white;
    padding: 15px;
    margin-top: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    text-align: left;
  }
  input {
    width: 90%;
    padding: 10px;
    margin-top: 10px;
    border-radius: 8px;
    border: 1px solid #bbb;
  }
  button {
    margin-top: 10px;
    padding: 12px 20px;
    border: none;
    background: #007bff;
    color: white;
    border-radius: 8px;
    cursor: pointer;
  }
  button:active {
    background: #0056b3;
  }
  #reader {
    margin-top: 20px;
  }
</style>
</head>

<body>

<h2>Product Verification</h2>

<!-- Manual Input -->
<input type="text" id="manualInput" placeholder="Enter Product ID">
<button onclick="manualSearch()">Search</button>

<!-- QR Scanner -->
<div id="reader" style="width: 300px;"></div>

<!-- Result -->
<div id="result"></div>

<script>
// ---------------------------------------
//  JSON DATA (Your product list)
// ---------------------------------------
const productData = [
  {
    "ProductID": "PRD001",
    "ProductName": "Demo Product",
    "Batch": "2",
    "MFGDate": "01/01/2000",
    "EXPDate": "uhwuvih",
    "Status": "Valid"
  },
  {
    "ProductID": "PRD002",
    "ProductName": "Dummy",
    "Batch": "2",
    "MFGDate": "01/01/2000",
    "EXPDate": "wvio",
    "Status": "Not valid"
  }
];

// ---------------------------------------
// Display Product Details
// ---------------------------------------
function showProduct(product) {
  document.getElementById("result").innerHTML = `
    <div class="card">
      <p><b>Product ID:</b> ${product.ProductID}</p>
      <p><b>Name:</b> ${product.ProductName}</p>
      <p><b>Batch:</b> ${product.Batch}</p>
      <p><b>MFG Date:</b> ${product.MFGDate}</p>
      <p><b>EXP Date:</b> ${product.EXPDate}</p>
      <p><b>Status:</b> ${product.Status}</p>
    </div>
  `;
}

// ---------------------------------------
// Manual Search
// ---------------------------------------
function manualSearch() {
  let pid = document.getElementById("manualInput").value.trim();
  let match = productData.find(p => p.ProductID === pid);

  if (match) {
    showProduct(match);
  } else {
    document.getElementById("result").innerHTML =
      `<p style='color:red;'>❌ No product found</p>`;
  }
}

// ---------------------------------------
// QR Scanner
// ---------------------------------------
function onScanSuccess(decodedText) {
  let match = productData.find(p => p.ProductID === decodedText);

  if (match) {
    showProduct(match);
  } else {
    document.getElementById("result").innerHTML =
      `<p style='color:red;'>❌ Invalid Product</p>`;
  }
}

// Start Scanner
const scanner = new Html5QrcodeScanner("reader", {
  fps: 10,
  qrbox: 200
});
scanner.render(onScanSuccess);
</script>

</body>
</html>
